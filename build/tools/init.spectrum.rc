# SPECTRUM KERNEL MANAGER
# Ramdisk file for profile based kernel management
# Implimentation inspired by Franco's fku profilesf

# Initialization
on property:kernel.tweaks.run_now=1
   # Set default profile on first boot
   exec u:r:init:s0 root root -- /init.spectrum.sh
   exec u:r:su:s0 root root -- /init.spectrum.sh
   # Enable Spectrum support
   setprop spectrum.support 1

   setprop persist.spectrum.kernel Radon-Rebuild

# Balance (default profile)
on property:persist.spectrum.profile=0
    write /sys/devices/system/cpu/cpu0/online 1
    write /sys/devices/system/cpu/cpu1/online 1
    write /sys/devices/system/cpu/cpu2/online 1
    write /sys/devices/system/cpu/cpu3/online 1
    write /sys/devices/system/cpu/cpu4/online 1
    write /sys/devices/system/cpu/cpu5/online 1
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "darkness"
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq 691200
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq 1401600
    write /sys/devices/system/cpu/cpu0/cpufreq/darkness/go_hispeed_load 85
    write /sys/devices/system/cpu/cpu0/cpufreq/darkness/timer_rate 40000
    write /sys/devices/system/cpu/cpu0/cpufreq/darkness/hispeed_freq 1382400
    write /sys/devices/system/cpu/cpu0/cpufreq/darkness/target_loads "50 1017600:60 1190400:70 1305600:80 1382400:90 1401600:95"
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor "darkness"
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_min_freq 883200
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_max_freq 1804800
    write /sys/devices/system/cpu/cpu4/cpufreq/darkness/go_hispeed_load 90
    write /sys/devices/system/cpu/cpu4/cpufreq/darkness/timer_rate 40000
    write /sys/devices/system/cpu/cpu4/cpufreq/darkness/hispeed_freq 1305600
    write /sys/devices/system/cpu/cpu4/cpufreq/darkness/target_loads "74 998400:73 1056000:64 1113600:80 1190400:61 1248000:69 1305600:64 1382400:74 1612800:69 1747200:67 1804800:72"
    write /sys/kernel/cpu_input_boost/enabled 1
	write /sys/kernel/cpu_input_boost/ib_freqs "1017600 883200"
	write /sys/kernel/cpu_input_boost/ib_duration_ms 64
	write /sys/kernel/cpu_input_boost/fb_duration_ms 64
    write /sys/module/msm_performance/parameters/touchboost 0
    write /sys/module/adreno_idler/parameters/adreno_idler_active N
    write /sys/class/kgsl/kgsl-3d0/max_gpuclk 600000000
    write /sys/block/mmcblk0/queue/scheduler cfq
    write /sys/block/mmcblk1/queue/scheduler cfq
    write /sys/class/kgsl/kgsl-3d0/devfreq/adrenoboost 1
    write /sys/module/lowmemorykiller/parameters/enable_adaptive_lmk 0

# Performance
on property:persist.spectrum.profile=1
    write /sys/devices/system/cpu/cpu0/online 1
    write /sys/devices/system/cpu/cpu1/online 1
    write /sys/devices/system/cpu/cpu2/online 1
    write /sys/devices/system/cpu/cpu3/online 1
    write /sys/devices/system/cpu/cpu4/online 1
    write /sys/devices/system/cpu/cpu5/online 1
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "darkness"
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq 691200
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq 1401600
    write /sys/devices/system/cpu/cpu0/cpufreq/darkness/go_hispeed_load 95
    write /sys/devices/system/cpu/cpu0/cpufreq/darkness/timer_rate 20000
    write /sys/devices/system/cpu/cpu0/cpufreq/darkness/hispeed_freq 1401600
    write /sys/devices/system/cpu/cpu0/cpufreq/darkness/target_loads "40 1017600:50 1190400:60 1305600:70 1382400:80 1401600:90"
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor "darkness"
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_min_freq 883200
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_max_freq 2035200
    write /sys/devices/system/cpu/cpu4/cpufreq/darkness/go_hispeed_load 80
    write /sys/devices/system/cpu/cpu4/cpufreq/darkness/timer_rate 20000
    write /sys/devices/system/cpu/cpu4/cpufreq/darkness/hispeed_freq 1382400
    write /sys/devices/system/cpu/cpu4/cpufreq/darkness/target_loads "75 1382400:80 1747200:85"
    write /sys/kernel/cpu_input_boost/enabled 1
	write /sys/kernel/cpu_input_boost/ib_freqs "1305600 1305600"
	write /sys/kernel/cpu_input_boost/ib_duration_ms 1000
	write /sys/kernel/cpu_input_boost/fb_duration_ms 1000
    write /sys/module/msm_performance/parameters/touchboost 1
    write /sys/module/adreno_idler/parameters/adreno_idler_active N
    write /sys/class/kgsl/kgsl-3d0/max_gpuclk 600000000
    write /sys/block/mmcblk0/queue/scheduler zen
    write /sys/block/mmcblk1/queue/scheduler zen
    write /sys/class/kgsl/kgsl-3d0/devfreq/adrenoboost 1

# Battery
on property:persist.spectrum.profile=2
    write /sys/devices/system/cpu/cpu0/online 1
    write /sys/devices/system/cpu/cpu1/online 1
    write /sys/devices/system/cpu/cpu2/online 1
    write /sys/devices/system/cpu/cpu3/online 1
    write /sys/devices/system/cpu/cpu4/online 1
    write /sys/devices/system/cpu/cpu5/online 1
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "darkness"
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq 691200
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq 1305600
    write /sys/devices/system/cpu/cpu0/cpufreq/darkness/go_hispeed_load 100
    write /sys/devices/system/cpu/cpu0/cpufreq/darkness/hispeed_freq 1190400
    write /sys/devices/system/cpu/cpu0/cpufreq/darkness/timer_rate 60000
    write /sys/devices/system/cpu/cpu0/cpufreq/darkness/target_loads "75 1017600:85 1190400:95"
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor "darkness"
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_min_freq 883200
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_max_freq 1612800
    write /sys/devices/system/cpu/cpu4/cpufreq/darkness/go_hispeed_load 100
    write /sys/devices/system/cpu/cpu4/cpufreq/darkness/hispeed_freq 1056000
    write /sys/devices/system/cpu/cpu4/cpufreq/darkness/timer_rate 60000
    write /sys/devices/system/cpu/cpu4/cpufreq/darkness/target_loads "90 1056000:95"
    write /sys/kernel/cpu_input_boost/enabled 0
	write /sys/kernel/cpu_input_boost/ib_freqs "691200 883200"
	write /sys/kernel/cpu_input_boost/ib_duration_ms 0
	write /sys/kernel/cpu_input_boost/fb_duration_ms 0
    write /sys/module/msm_performance/parameters/touchboost 0
    write /sys/module/adreno_idler/parameters/adreno_idler_active Y
    write /sys/class/kgsl/kgsl-3d0/max_gpuclk 432000000
    write /sys/block/mmcblk0/queue/scheduler noop
    write /sys/block/mmcblk1/queue/scheduler noop
    write /sys/class/kgsl/kgsl-3d0/devfreq/adrenoboost 0
    write /sys/module/lowmemorykiller/parameters/enable_adaptive_lmk 0

# Gaming
on property:persist.spectrum.profile=3
    write /sys/devices/system/cpu/cpu0/online 1
    write /sys/devices/system/cpu/cpu1/online 1
    write /sys/devices/system/cpu/cpu2/online 1
    write /sys/devices/system/cpu/cpu3/online 1
    write /sys/devices/system/cpu/cpu4/online 1
    write /sys/devices/system/cpu/cpu5/online 1
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "darkness"
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor "darkness"
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq 691200
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq 1401600
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_min_freq 883200
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_max_freq 2035200
    write /sys/devices/system/cpu/cpu0/cpufreq/darkness/go_hispeed_load 80
    write /sys/devices/system/cpu/cpu0/cpufreq/darkness/hispeed_freq 1401600
    write /sys/devices/system/cpu/cpu0/cpufreq/darkness/timer_rate 20000
    write /sys/devices/system/cpu/cpu0/cpufreq/darkness/target_loads "40 1017600:50 1190400:60 1305600:70 1382400:75 1401600:80"
    write /sys/devices/system/cpu/cpu4/cpufreq/darkness/go_hispeed_load 85
    write /sys/devices/system/cpu/cpu4/cpufreq/darkness/hispeed_freq 1804800
    write /sys/devices/system/cpu/cpu4/cpufreq/darkness/timer_rate 20000
    write /sys/devices/system/cpu/cpu4/cpufreq/darkness/target_loads "74 998400:73 1056000:64 1113600:80 1190400:61 1248000:69 1305600:64 1382400:74 1612800:69 1747200:67 1804800:72"
    write /sys/kernel/cpu_input_boost/enabled 1
	write /sys/kernel/cpu_input_boost/ib_freqs "1401600 1612800"
	write /sys/kernel/cpu_input_boost/ib_duration_ms 1000
	write /sys/kernel/cpu_input_boost/fb_duration_ms 1000
    write /sys/module/adreno_idler/parameters/adreno_idler_active N
    write /sys/class/kgsl/kgsl-3d0/max_gpuclk 600000000
    write /sys/block/mmcblk0/queue/scheduler zen
    write /sys/block/mmcblk1/queue/scheduler zen
	write /sys/module/lowmemorykiller/parameters/enable_adaptive_lmk 0
	write /sys/class/kgsl/kgsl-3d0/devfreq/adrenoboost 2